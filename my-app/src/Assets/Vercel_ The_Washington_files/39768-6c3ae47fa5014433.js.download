(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[39768],{515119:function(e,t,n){"use strict";n.d(t,{O:function(){return o},q:function(){return s}});var i=n(397458),r=n(852049),l=n(7594);let s=e=>{let{children:t,...n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.ZP,{Component:"h1",center:!0,h3:!0,noMargin:!0,...n,children:t}),(0,i.jsx)(l.L,{})]})},o=e=>{let{children:t,...n}=e;return(0,i.jsx)(r.ZP,{noMargin:!0,preset:"body-2",type:"secondary",...n,children:t})}},940093:function(e,t,n){"use strict";n.d(t,{CF:function(){return a},DR:function(){return l},E3:function(){return o},NE:function(){return p},Ss:function(){return s},r_:function(){return c},ui:function(){return d},wn:function(){return v}});var i=n(652983),r=n(210699);let l=20,s={DESTINATION_SELECT:"destination-select",CREATE_TEAM:"create-team",BILLING:"billing",PAID_FEATURES:"paid-features",REMOVE_PAID_FEATURES:"remove-paid-features",GATHER_DEPS:"gather-deps",OVERVIEW:"overview"},o={step:s.DESTINATION_SELECT,history:[s.DESTINATION_SELECT],destinationId:null,conflict:{hasConflict:!1},paidFeatures:{concurrentBuilds:!0,passwordProtection:!0,previewDeploymentSuffix:!0},transferData:null},a=(0,i.createContext)([o,()=>{}]),c=()=>(0,i.useContext)(a),d=()=>{let[{destinationId:e}]=c(),{teams:t,user:n}=(0,r.Z)();if(!e)return null;if(!e.startsWith("team_"))return n;let i=t&&t.find(t=>t.id===e)||null;return i},u=(e,t)=>{var n,i;if(!(null==e?void 0:null===(n=e.billing)||void 0===n?void 0:n.invoiceItems)||!(null==t?void 0:null===(i=t.billing)||void 0===i?void 0:i.invoiceItems))return{hasConflict:!1};let r={};for(let n of h){let i=e.billing.invoiceItems[n],l=t.billing.invoiceItems[n];if(!i||!i.quantity)continue;let s=(null==l?void 0:l.quantity)||0;i.quantity>s&&(r[n]={newAmount:i.quantity,difference:i.quantity-s,price:(null==l?void 0:l.price)||i.price})}return Object.keys(r).length?{hasConflict:!0,conflicts:r}:{hasConflict:!1}},h=["concurrentBuilds","passwordProtection","previewDeploymentSuffix"],v=e=>{var t;let{dispatch:n,isTeam:i,team:r,destinationAccount:l}=e;if(!l)return;let o=(null==l?void 0:null===(t=l.billing)||void 0===t?void 0:t.plan)==="enterprise";if(i){if(o)return n({type:"SET_STEP",step:s.GATHER_DEPS});let e=u(r,l);n({type:"UPDATE",state:{conflict:e}}),n(e.hasConflict?{type:"SET_STEP",step:s.PAID_FEATURES}:{type:"SET_STEP",step:s.GATHER_DEPS})}else n({type:"SET_STEP",step:s.GATHER_DEPS})},p=e=>{var t,n,i,r;let{team:l,dispatch:o}=e;if(!(null==l?void 0:null===(t=l.billing)||void 0===t?void 0:t.invoiceItems))return o({type:"SET_STEP",step:s.GATHER_DEPS});let a={};return(((null===(n=l.billing.invoiceItems.passwordProtection)||void 0===n?void 0:n.quantity)??0)>=1&&(a.passwordProtection=!0),((null===(i=l.billing.invoiceItems.previewDeploymentSuffix)||void 0===i?void 0:i.quantity)??0)>=1&&(a.previewDeploymentSuffix=!0),((null===(r=l.billing.invoiceItems.concurrentBuilds)||void 0===r?void 0:r.quantity)??0)>=2&&(a.concurrentBuilds=!0),Object.keys(a).length)?(o({type:"UPDATE",state:{conflict:{hasConflict:!0,conflicts:a}}}),o({type:"SET_STEP",step:s.REMOVE_PAID_FEATURES})):o({type:"SET_STEP",step:s.GATHER_DEPS})}},439768:function(e,t,n){"use strict";n.d(t,{Q:function(){return O}});var i=n(397458),r=n(652983),l=n(403873),s=n(426326),o=n(940215),a=n(829747),c=n(509877),d=n(426476),u=n(789808),h=n(7594),v=n(342958),p=n(852049),f=n(612542),m=n(585088),x=n(901291),E=n(347300),j=n(210699),T=n(638191),g=n(212951),y=n(58363),S=n(121123),_=n(640413),w=n(517659),b=n(133867),I=n(684874),A=n(287735),P=n(940093),D=n(893325),C=n.n(D),R=n(515119);function N(e){let{title:t,count:n,children:r}=e;return 0===n?null:(0,i.jsx)(E.P,{noMaxHeight:!0,title:t,children:(0,i.jsx)("div",{className:C().content,children:r})})}function k(e){let{children:t}=e;return(0,i.jsx)(E.c,{className:C().subitem,children:t})}t.Z=e=>{let{close:t,project:n,options:D}=e,{account:F,isTeam:H}=(0,j.Z)(),[{transferData:M,conflict:L,paidFeatures:Z},B]=(0,P.r_)(),z=(0,P.ui)(),G=(0,s.useRouter)(),[V,q]=(0,r.useState)(!1),[$,J]=(0,r.useState)((null==n?void 0:n.name)||""),[U,W]=(0,r.useState)(M?null:{message:"Transfer information not found, please go back and try again."}),[,{aliases:K,loadMore:Q,isLoadingMore:X,isReachingEnd:Y}]=(0,T.f)({project:n,limit:P.DR}),{data:ee}=(0,g.Z)(G.query.project??(null==n?void 0:n.id)),{data:et}=(0,b.Z)(G.query.project??(null==n?void 0:n.id)),en=!!(null==ee?void 0:ee.envs.some(e=>e.edgeConfigId)),ei=!!(null==ee?void 0:ee.envs.some(e=>{var t;return(null===(t=e.contentHint)||void 0===t?void 0:t.type)==="postgres-database"})),er=!!(null==ee?void 0:ee.envs.some(e=>{var t;return(null===(t=e.contentHint)||void 0===t?void 0:t.type)==="redis-url"})),el=!!(null==ee?void 0:ee.envs.some(e=>{var t;return(null===(t=e.contentHint)||void 0===t?void 0:t.type)==="blob-read-write-token"})),es=et&&et.integrations.length>0,eo=(null==ee?void 0:ee.envs)?ee.envs.filter(e=>"secret"===e.type):[],ea=(null==ee?void 0:ee.envs)?ee.envs.filter(e=>"secret"!==e.type):[],ec=async e=>{var i,r,s;if(e&&e.preventDefault(),!z)return;if(!$)return W({message:"Please enter a new project name."});q(!0);try{return await (0,_.NU)({name:$,teamId:"id"in z?null==z?void 0:z.id:null}),q(!1),W({message:`Project "${$}" already exists, please use a new name.`})}catch(e){if((0,A.B)(e)&&404!==e.status)return q(!1),W({message:`Project "${$}" already exists, please use a new name.`})}let o=L.hasConflict?{concurrentBuilds:Z.concurrentBuilds?(null===(i=L.conflicts.concurrentBuilds)||void 0===i?void 0:i.newAmount)??0:0,passwordProtection:!!Z.passwordProtection&&null!==(r=L.conflicts.passwordProtection)&&void 0!==r&&!!r.newAmount,previewDeploymentSuffix:!!Z.previewDeploymentSuffix&&null!==(s=L.conflicts.previewDeploymentSuffix)&&void 0!==s&&!!s.newAmount}:{};try{await (0,y.I)(`${(0,S.HJ)("v3")}/${n.name}/transfer${(0,w.c)({teamId:H?F.id:void 0})}`,{method:"POST",body:JSON.stringify({toAccountId:"id"in z&&z.id||"uid"in z&&z.uid,newProjectName:$,paidFeatures:o}),throwOnHTTPError:!0}),en&&I.co.track(I.s6.PROJECT_TRANSFER_INITIATED_WITH_MISSING_EDGE_CONFIG),ei&&I.co.track(I.s6.PROJECT_TRANSFER_INITIATED_WITH_MISSING_POSTGRES_DATABASE),er&&I.co.track(I.s6.PROJECT_TRANSFER_INITIATED_WITH_MISSING_KV_DATABASE),el&&I.co.track(I.s6.PROJECT_TRANSFER_INITIATED_WITH_MISSING_BLOB_STORAGE),es?I.co.track(I.s6.PROJECT_TRANSFER_INITIATED_WITH_MISSING_INTEGRATIONS):I.co.track(I.s6.PROJECT_TRANSFER_INITIATED),Z.concurrentBuilds&&Z.passwordProtection&&Z.previewDeploymentSuffix?I.co.track(I.s6.PROJECT_TRANSFER_CONFIRMED_PAID_FEATURES):I.co.track(I.s6.PROJECT_TRANSFER_DECLINED_PAID_FEATURES)}catch(e){q(!1),W((0,l.SC)(e));return}setTimeout(()=>{var e;(null==D?void 0:D.redirectOnSuccess)??!0?G.push("/[teamSlug]/[project]?fromTransfer=1",`/${"slug"in z&&z.slug||"username"in z&&z.username}/${encodeURIComponent($)}`):(null==D||null===(e=D.onSuccess)||void 0===e||e.call(D,n),t())},1e3)};return(0,i.jsxs)("form",{onSubmit:ec,children:[(0,i.jsxs)(u.u.Body,{children:[(0,i.jsx)(R.q,{children:"Transfer Project"}),(0,i.jsxs)(v.Z,{center:!0,row:!0,children:[(0,i.jsxs)(v.Z,{center:!0,flex:"0 0 40%",children:[(0,i.jsx)(d.qE,{hash:null==F?void 0:F.avatar,placeholder:!F,size:64,teamId:H?null==F?void 0:F.id:null,username:H?null:null==F?void 0:F.uid}),(0,i.jsx)(h.L,{className:"geist-hide-on-mobile",y:.5}),(0,i.jsx)(p.ZP,{className:"geist-ellipsis geist-hide-on-mobile",noMargin:!0,preset:"body-2",type:"secondary",weight:500,children:null==F?void 0:F.name})]}),(0,i.jsxs)(v.Z,{center:!0,children:[(0,i.jsx)(h.L,{inline:!0,x:.25}),O,(0,i.jsx)(h.L,{inline:!0,x:.25})]}),(0,i.jsxs)(v.Z,{center:!0,flex:"0 0 40%",children:[(0,i.jsx)(d.qE,{hash:null==z?void 0:z.avatar,placeholder:!z,size:64,teamId:z&&"id"in z&&z.id||void 0}),(0,i.jsx)(h.L,{className:"geist-hide-on-mobile",y:.5}),(0,i.jsx)(p.ZP,{className:"geist-ellipsis geist-hide-on-mobile",noMargin:!0,preset:"body-2",type:"secondary",weight:500,children:null==z?void 0:z.name})]})]}),(0,i.jsx)(h.L,{}),(0,i.jsxs)(u.u.Inset,{children:[(0,i.jsx)(m.I,{error:U||void 0,id:"new-project-name",label:"New Project Name",maxLength:100,onChange:e=>{W(null),J(e.target.value)},placeholder:null==n?void 0:n.name,spellCheck:!1,value:$}),(0,i.jsx)(h.L,{}),(0,i.jsx)(R.O,{children:(0,i.jsxs)(v.Z,{Component:"span",noWrap:!0,row:!0,children:[(0,i.jsx)(o.I,{color:"var(--geist-success)",fill:!0,size:20}),(0,i.jsx)(h.L,{inline:!0,x:1/3})," No downtime or workflow interruptions will be caused."]})}),en?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.L,{}),(0,i.jsx)(x.Z,{fill:!0,label:!1,type:"warning",variant:"contrast",children:"Edge Configs won't be transferred. Deployments of your project will fail until you connect it to an Edge Config in the target account."})]}):null,el?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.L,{}),(0,i.jsx)(x.Z,{fill:!0,label:!1,type:"warning",variant:"contrast",children:"This project will keep access to its Blob Store, though the Store itself will not be transferred. The existing connection will be retained but will not be visible from the Store, instead it can be managed from the project's Environment Variable settings."})]}):null,er?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.L,{}),(0,i.jsx)(x.Z,{fill:!0,label:!1,type:"warning",variant:"contrast",children:"This project will keep access to its KV Database, though the Database itself will not be transferred. The existing connection will be retained but will not be visible from the Database, instead it can be managed from the project's Environment Variable settings."})]}):null,ei?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.L,{}),(0,i.jsx)(x.Z,{fill:!0,label:!1,type:"warning",variant:"contrast",children:"This project will keep access to its Postgres Database, though the Database itself will not be transferred. The existing connection will be retained but will not be visible from the Database, instead it can be managed from the project's Environment Variable settings."})]}):null,es?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.L,{}),(0,i.jsx)(x.Z,{fill:!0,label:!1,type:"warning",variant:"contrast",children:"Integrations won't be transferred. They need to be added again after the transfer is complete."})]}):null]}),M?(0,i.jsxs)(u.u.Outset,{children:[(0,i.jsx)(N,{count:M.domains.length,title:(0,i.jsxs)("span",{children:[M.domains.length," ",1===M.domains.length?"Domain":"Domains"," will be transferred."]}),children:M.domains.map(e=>(0,i.jsxs)(k,{children:[(0,i.jsx)("span",{title:e.name,children:e.name}),(0,i.jsx)(a.o,{color:"var(--accents-6)",size:16}),(0,i.jsx)("span",{title:e.name,children:e.name})]},e.name))}),(0,i.jsxs)(N,{count:K.length,title:(0,i.jsxs)("span",{children:[K.length,K.length===P.DR&&"+"," ",1===K.length?"Alias":"Aliases"," will be transferred."]}),children:[K.map(e=>(0,i.jsxs)(k,{children:[(0,i.jsx)("span",{title:e.alias,children:e.alias}),(0,i.jsx)(a.o,{color:"var(--accents-6)",size:16}),(0,i.jsx)("span",{title:e.alias,children:e.alias})]},e.alias)),K.length===P.DR&&!Y&&(0,i.jsxs)("div",{className:C().inset,children:[(0,i.jsx)(f.Z,{loading:X,onClick:Q}),(0,i.jsx)(h.L,{})]})]}),(0,i.jsx)(N,{count:eo.length,title:(0,i.jsxs)("span",{children:[eo.length," ",1===eo.length?"Secret":"Secrets"," ","will be copied."]}),children:eo.map((e,t)=>(0,i.jsxs)(k,{children:[(0,i.jsx)("span",{title:e.key,children:e.key}),(0,i.jsx)(c.C,{color:"var(--accents-6)",size:16}),(0,i.jsx)("span",{title:e.key,children:e.key})]},`secret-${e.key}-${t}`))}),(0,i.jsx)(N,{count:ea.length??0,title:(0,i.jsxs)("span",{children:[ea.length," Environment"," ",1===ea.length?"Variable":"Variables"," will be transferred."]}),children:ea.map(e=>(0,i.jsxs)(k,{children:[(0,i.jsx)("span",{title:e.key,children:e.key}),(0,i.jsx)(a.o,{color:"var(--accents-6)",size:16}),(0,i.jsx)("span",{title:e.key,children:e.key})]},e.id))}),(0,i.jsx)(E.P,{title:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:"All Deployments"})," will be transferred."]})}),(0,i.jsx)(h.L,{y:-1})]}):null]}),(0,i.jsxs)(u.u.Actions,{children:[(0,i.jsx)(u.u.Action,{disabled:V,onClick:()=>B({type:"BACK"}),type:"secondary",children:"Back"}),(0,i.jsx)(u.u.Action,{buttonType:"submit",loading:V,children:"Transfer"})]})]})};let O=(0,i.jsxs)("svg",{fill:"var(--accents-5)",height:"20",viewBox:"0 0 66 20",width:"66",children:[(0,i.jsx)("path",{d:"M43 10c0 5.523-4.477 10-10 10s-10-4.477-10-10S27.477 0 33 0s10 4.477 10 10zM32.53 6.47a.75.75 0 10-1.06 1.06L33.94 10l-2.47 2.47a.75.75 0 101.06 1.06l3-3a.75.75 0 000-1.06l-3-3z"}),(0,i.jsx)("path",{d:"M.5 9.125v1h2.455v-1H.5zM4.864 9.125v1h3.909v-1h-3.91zM10.682 9.125v1h3.909v-1h-3.91zM16.5 9.125v1h3.91v-1H16.5zM45.59 9.125v1h3.91v-1h-3.91zM51.41 9.125v1h3.908v-1H51.41zM57.227 9.125v1h3.91v-1h-3.91zM63.045 9.125v1H65.5v-1h-2.455z"})]})},640413:function(e,t,n){"use strict";n.d(t,{NU:function(){return s},Sj:function(){return a},e5:function(){return o}}),n(426326);var i=n(121123),r=n(58363),l=n(517659);n(333971);let s=e=>{let{name:t,teamId:n}=e;return(0,r.Z)(`${i.VE}/${encodeURIComponent(t)}${(0,l.c)({teamId:n,deploymentInfo:0})}`,{throwOnHTTPError:!0})},o=e=>{let{id:t,teamId:n}=e;return(0,r.Z)(`${i.VE}/${t}${(0,l.c)({teamId:n})}`,{throwOnHTTPError:!0})},a=e=>(null==e?void 0:e.code)==="tarball_not_found"?"Your codebase could not be retrieved. Please check that your repository is not empty.":(null==e?void 0:e.keyword)==="additionalProperties"?"Additional property `"+e.params.additionalProperty+"` is not allowed. Please check the `vercel.json` or `now.json` file in your repository.":e.message||e.toString()},287735:function(e,t,n){"use strict";n.d(t,{B:function(){return s},X:function(){return o}});var i=n(403873),r=n(69282),l=n(213025);let s=e=>(0,r.x)(e)&&"code"in e;async function o(e){if(e.status>=200&&e.status<300)return e;let{type:t}=(0,l.Q)(e.headers.get("Content-Type")||"text/plain");if("application/json"===t){let t=await e.json();if("error"in t&&s(t.error))throw(0,i.SC)(t.error);if(s(t))throw(0,i.SC)(t)}if("text/plain"===t){let t=await e.text();throw(0,i.SC)(t)}throw Error(e.statusText)}},509877:function(e,t,n){"use strict";n.d(t,{C:function(){return r}});var i=n(361961);let r=(0,i.H)('<path d="M6 17C4.89543 17 4 16.1046 4 15V5C4 3.89543 4.89543 3 6 3H13C13.7403 3 14.3866 3.4022 14.7324 4M11 21H18C19.1046 21 20 20.1046 20 19V9C20 7.89543 19.1046 7 18 7H11C9.89543 7 9 7.89543 9 9V19C9 20.1046 9.89543 21 11 21Z"/>')},893325:function(e){e.exports={content:"overview_content__n1_uo",inset:"overview_inset__tFJf4",subitem:"overview_subitem__PK_Xz",outset:"overview_outset__qvglJ"}}}]);