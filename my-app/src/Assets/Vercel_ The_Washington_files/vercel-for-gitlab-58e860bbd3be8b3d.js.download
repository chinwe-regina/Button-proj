(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3700],{26516:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/deployments/git/vercel-for-gitlab",function(){return o(946773)}])},946773:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return D},meta:function(){return G}}),o(652983);var a=o(244993),r=o(616439);o(110735);var i=o(841274),n=o(441470);let s={};function m(e){let{components:t,...o}=e;return(0,a.mdx)("wrapper",{...s,...o,components:t,mdxType:"MDXLayout"},(0,a.mdx)("h3",null,"A Deployment for Each Push"),(0,a.mdx)("p",null,"Vercel for GitLab will ",(0,a.mdx)("strong",{parentName:"p"},"deploy each push by default"),`. This includes
pushes and pull requests made to branches. This allows those working within the
project to preview the changes made before they are pushed to production.`),(0,a.mdx)("p",null,"With each new push, if Vercel is already building a previous commit, the current build will be canceled to build the most recent commit so that you always have the latest changes deployed as quickly as possible."),(0,a.mdx)("h3",null,"Updating the Production Domain"),(0,a.mdx)("p",null,"If ",(0,a.mdx)("a",{parentName:"p",href:"/docs/projects/custom-domains"},"Custom Domains")," are set from a project domains dashboard, pushes and merges to the ",(0,a.mdx)("a",{parentName:"p",href:"/docs/deployments/git#production-branch"},"Production Branch"),' (commonly "main") will be made live to those domains with the latest deployment made with a push.'),(0,a.mdx)("p",null,"If you decide to revert a commit that has already been deployed to production, the previous ",(0,a.mdx)("a",{parentName:"p",href:"/docs/deployments/environments#production"},"Production Deployment")," from a commit will automatically be made available at the ",(0,a.mdx)("a",{parentName:"p",href:"/docs/projects/custom-domains"},"Custom Domain")," instantly; providing you with instant rollbacks."),(0,a.mdx)("h3",null,"Preview URLs for Each Merge Request"),(0,a.mdx)("p",null,"The latest push to any ",(0,a.mdx)("a",{parentName:"p",href:"https://docs.gitlab.com/ee/user/project/merge_requests/"},"merge request")," will automatically be made available at a unique preview URL based on the project name, branch, and team or username. These URLs will be provided through a comment on each merge request."),(0,a.mdx)(n.Z,{src:"https://assets.vercel.com/image/upload/v1689795055/docs-assets/static/guides/getting-started-with-vercel-for-gitlab/merge-request-alias.png",width:1980/2.2,height:564/2.2,shadow:!0,borderRadius:!0,mdxType:"ImageFigure"}),(0,a.mdx)(i.Z,{mdxType:"Caption"},"A preview URL created from a merge request."))}m.isMDXComponent=!0;var l=o(901291),p=o(141970),d=o(245968),u=o(5930);let c={};function h(e){let{components:t,...o}=e;return(0,a.mdx)("wrapper",{...c,...o,components:t,mdxType:"MDXLayout"},(0,a.mdx)("p",null,`You may want to use different workflows and APIs based on Git information. To support this,\xa0the following `,(0,a.mdx)("a",{parentName:"p",href:"/docs/projects/environment-variables#system-environment-variables"},"System Environment Variables")," are exposed to your Deployments:"),(0,a.mdx)("br",null),(0,a.mdx)(u.Z,{envs:d.kv,mdxType:"SystemEnvVariablesTable"}))}h.isMDXComponent=!0;var g=o(950429);let x={};function y(e){let{components:t,...o}=e;return(0,a.mdx)("wrapper",{...x,...o,components:t,mdxType:"MDXLayout"},(0,a.mdx)("p",null,"We require some permissions through our Vercel for GitLab integration. Below are listed the permissions required and a description for what they are used for."),(0,a.mdx)("table",null,(0,a.mdx)("thead",{parentName:"table"},(0,a.mdx)("tr",{parentName:"thead"},(0,a.mdx)("th",{parentName:"tr",align:null},"Permission"),(0,a.mdx)("th",{parentName:"tr",align:null},"Read"),(0,a.mdx)("th",{parentName:"tr",align:null},"Write"),(0,a.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,a.mdx)("tbody",{parentName:"table"},(0,a.mdx)("tr",{parentName:"tbody"},(0,a.mdx)("td",{parentName:"tr",align:null},(0,a.mdx)("inlineCode",{parentName:"td"},"API")),(0,a.mdx)("td",{parentName:"tr",align:null},"Y"),(0,a.mdx)("td",{parentName:"tr",align:null},"Y"),(0,a.mdx)("td",{parentName:"tr",align:null},`Allows us access to the API—including all groups and projects, the container registry, and the package registry—to clone repositories and add comments to pull requests and commits.`)))),(0,a.mdx)(l.Z,{mdxType:"Note"},"We use the permissions above in order to provide you with the best possible deployment experience. If you have any questions or concerns about any of the permission scopes, please"," ",(0,a.mdx)(g.r,{variant:"highlight",href:"/help#issues",mdxType:"Link"},"contact Vercel Support"),"."))}y.isMDXComponent=!0;let b={};function f(e){let{components:t,...o}=e;return(0,a.mdx)("wrapper",{...b,...o,components:t,mdxType:"MDXLayout"},(0,a.mdx)("p",null,"To sign up on Vercel with a different GitLab account, sign out of your current GitLab account."),(0,a.mdx)("p",null,"Then, restart the Vercel ",(0,a.mdx)("a",{parentName:"p",href:"/signup"},"signup process"),"."))}f.isMDXComponent=!0;let w={};function v(e){let{components:t,...o}=e;return(0,a.mdx)("wrapper",{...w,...o,components:t,mdxType:"MDXLayout"},(0,a.mdx)("p",null,"When importing or connecting a GitLab repository, we require that you have ",(0,a.mdx)("b",null,"Maintainer")," access to the corresponding repository, so that we can configure a webhook and automatically deploy pushed commits."),(0,a.mdx)("p",null,"If a repository is missing when you try to import or connect it, make sure that you have ",(0,a.mdx)("a",{parentName:"p",href:"https://docs.gitlab.com/ee/user/project/members/"},"Maintainer access configured for the repository"),"."))}v.isMDXComponent=!0,o(640832);let N={};function L(e){let{components:t,...o}=e;return(0,a.mdx)("wrapper",{...N,...o,components:t,mdxType:"MDXLayout"},(0,a.mdx)("p",null,"By default, comments from the Vercel bot will appear on your pull requests and commits. You can silence these comments in your project's settings:"),(0,a.mdx)("ol",null,(0,a.mdx)("li",{parentName:"ol"},"From the Vercel ",(0,a.mdx)("a",{parentName:"li",href:"/dashboard"},"dashboard"),", select your project"),(0,a.mdx)("li",{parentName:"ol"},"From the ",(0,a.mdx)("strong",{parentName:"li"},"Settings")," tab, select ",(0,a.mdx)("strong",{parentName:"li"},"Git")),(0,a.mdx)("li",{parentName:"ol"},"Under ",(0,a.mdx)("strong",{parentName:"li"},"Connected Git Repository"),", toggle the switches to your preference")),(0,a.mdx)(l.Z,{mdxType:"Note"},"It is currently not possible to prevent comments for specific branches."))}L.isMDXComponent=!0;let G={title:"Deploying GitLab Projects with Vercel",description:`​Vercel for GitLab automatically deploys your GitLab projects with Vercel, providing Preview Deployment URLs, and automatic Custom Domain updates.`},T={meta:G},_=e=>{let{children:t}=e;return(0,a.mdx)(r.ZP,{meta:G},t)};function D(e){let{components:t,...o}=e;return(0,a.mdx)(_,{...T,...o,components:t,mdxType:"MDXLayout"},(0,a.mdx)("p",null,`​`,(0,a.mdx)(p.Z,{mdxType:"ProductName"})," for GitLab automatically deploys your GitLab projects with ",(0,a.mdx)("a",{parentName:"p",href:"/"},(0,a.mdx)(p.Z,{mdxType:"ProductName"})),", providing ",(0,a.mdx)("a",{parentName:"p",href:"/docs/deployments/preview-deployments#preview-urls"},"Preview Deployment URLs"),", and automatic ",(0,a.mdx)("a",{parentName:"p",href:"/docs/projects/domains/working-with-domains"},"Custom Domain")," updates."),(0,a.mdx)("h2",null,"Supported GitLab Products"),(0,a.mdx)("ul",null,(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("a",{parentName:"li",href:"https://about.gitlab.com/pricing/"},"GitLab Free")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("a",{parentName:"li",href:"https://about.gitlab.com/pricing/"},"GitLab Premium")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("a",{parentName:"li",href:"https://about.gitlab.com/pricing/"},"GitLab Ultimate")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("a",{parentName:"li",href:"https://about.gitlab.com/enterprise/"},"GitLab Enterprise")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("a",{parentName:"li",href:"#using-gitlab-pipelines"},"Self-Managed GitLab"))),(0,a.mdx)("h2",null,"Deploying a GitLab Repository"),(0,a.mdx)("p",null,"The ",(0,a.mdx)("a",{parentName:"p",href:"/docs/deployments/git#deploying-a-git-repository"},"Deploying a Git repository")," guide outlines how to create a new Vercel Project from a GitLab repository, and enable automatic deployments on every branch push."),(0,a.mdx)("h2",null,"Changing the GitLab Repository of a Project"),(0,a.mdx)("p",null,"If you'd like to connect your Vercel Project to a different GitLab repository or disconnect it, you can do so from the ",(0,a.mdx)("a",{parentName:"p",href:"/docs/projects/overview#git"},"Git section")," in the Project Settings."),(0,a.mdx)(m,{mdxType:"GitLabDefaultBehaviour"}),(0,a.mdx)(h,{mdxType:"GitLabEnvironmentVariables"}),(0,a.mdx)(y,{mdxType:"GitLabPermissions"}),(0,a.mdx)(f,{mdxType:"GitLabSignup"}),(0,a.mdx)("h2",null,"Missing Git repository"),(0,a.mdx)(v,{mdxType:"GitlabMissingRepository"}),(0,a.mdx)("h2",null,"Silence comments"),(0,a.mdx)(L,{mdxType:"GitlabSilenceComments"}),(0,a.mdx)("h2",null,"Using GitLab Pipelines"),(0,a.mdx)("p",null,"You can use GitLab Pipelines to build and deploy your Vercel Application."),(0,a.mdx)("p",null,(0,a.mdx)("inlineCode",{parentName:"p"},"vercel build")," allows you to build your project inside GitLab Pipelines, without exposing your source code to Vercel. Then, ",(0,a.mdx)("inlineCode",{parentName:"p"},"vercel deploy --prebuilt")," skips the build step on Vercel and uploads the previously generated ",(0,a.mdx)("inlineCode",{parentName:"p"},".vercel/output")," folder to Vercel from the GitLab Pipeline."),(0,a.mdx)("p",null,(0,a.mdx)("a",{parentName:"p",href:"https://vercel.com/guides/how-can-i-use-gitlab-pipelines-with-vercel"},"Learn more about how to configure GitLab Pipelines and Vercel")," for custom CI/CD workflows."),(0,a.mdx)(l.Z,{mdxType:"Note"},"In some cases, your GitLab merge pipeline can fail while your branch pipeline succeeds, allowing your merge requests to"," ",(0,a.mdx)(g.r,{href:"https://gitlab.com/gitlab-org/gitlab/-/issues/384927#top",variant:"highlight",mdxType:"Link"},"merge with failing tests"),". This is a GitLab issue. To avoid it, we recommend using ",(0,a.mdx)(g.r,{href:"/docs/cli/deploying-from-cli",variant:"highlight",mdxType:"Link"},"Vercel CLI")," to deploy your projects."))}D.isMDXComponent=!0},441470:function(e,t,o){"use strict";var a=o(397458);o(652983);var r=o(629891),i=o.n(r),n=o(14517),s=o(293640),m=o(921949),l=o(225137),p=o.n(l);t.Z=function(e){let{caption:t,margin:o=40,captionSpacing:r=null,shadow:l=!1,borderRadius:d=!1,...u}=e,c=(0,m.dD)();return(0,a.jsxs)("figure",{className:(0,n.W)(p().figure,{[p().shadow]:l,[p().borderRadius]:d}),style:{margin:`${o}px 0`},children:[(0,a.jsx)(s.Z,{zoomImg:{src:u.src},zoomMargin:c?10:50,children:(0,a.jsx)(i(),{...u})}),t?(0,a.jsx)("figcaption",{className:p().figcaption,style:r?{marginTop:r}:{},children:t}):null]})}},141970:function(e,t,o){"use strict";var a=o(291228);t.Z=()=>a.sG},225137:function(e){e.exports={figure:"image-figure_figure__4VmW_",shadow:"image-figure_shadow__tzeY2",borderRadius:"image-figure_borderRadius__E1su5",figcaption:"image-figure_figcaption__yH7_n",lightImage:"image-figure_lightImage__EpR47",darkImage:"image-figure_darkImage__ShEVM"}}},function(e){e.O(0,[49774,33586,25843,82366,80611,26222,54252,97222,60797,42798,50043,51796,92888,40179],function(){return e(e.s=26516)}),_N_E=e.O()}]);