(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91576],{404983:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var n=r(397458),i=r(3048),o=r(355344),a=r(652983),l=r(132950),s=r(121446),u=r(316944),c=r(793356),d=r(882598),m=r(791688),f=r(58363),h=r(121123),g=r(553730),v=r(636820);function p(e){let{onSuccess:t,email:r,isChromeStyle:u=!1,ssoToken:c,authDispatch:d}=e,[m,g]=(0,a.useState)(""),[p,y]=(0,a.useState)(""),[x,w]=(0,a.useState)(!1),[_,j]=(0,a.useState)(""),[C,k]=(0,a.useState)(!1),S=(0,a.useRef)(""),I=(0,a.useRef)(null),[M,E]=(0,a.useState)(0),[N,T]=(0,a.useState)({canSelfVerify:!1,code:"",message:""}),$=(0,a.useCallback)(async()=>{var e,n;switch(M){case 0:{if(!x){T({message:"Invalid phone number.",code:"invalid_phone_number"});return}T({message:"",code:""});let t=`${h.OK}/start-verify-phone?${(0,i.stringify)({email:r,phone:m,country:p})}`,n=await (0,f.I)(t,{method:"POST"});if(delete globalThis.__loggedIn,n.error){let t=null===(e=n.error.limit)||void 0===e?void 0:e.reset;if("rate_limited"===n.error.code&&t){let e=(0,o.Z)(1e3*t-Date.now(),{long:!0});T({message:`Too many requests - try again in ${e}.`,code:"rate_limit"})}else T({...n.error});return}E(M+1);break}case 1:if(4===_.length){k(!0);let e=`${h.OK}/check-verify-phone?${(0,i.stringify)({email:r,phone:m,country:p,code:_})}`,o=await (0,f.I)(e,{method:"POST"});if(delete globalThis.__loggedIn,o.error||!o.token){k(!1),T({message:(null===(n=o.error)||void 0===n?void 0:n.message)||"An error occurred while verifying this code. Please try again.",code:"error_verifying"}),setTimeout(()=>{var e;return null===(e=I.current)||void 0===e?void 0:e.focus()},500);return}let a=await (0,f.I)(`${h.OK}/verify?${(0,i.stringify)({email:r,token:o.token,...c?{ssoToken:c}:null})}`);if(delete globalThis.__loggedIn,a.error){k(!1),T({message:a.error.message||"An error occurred while verifying this code. Please try again.",code:"error_verifying"}),setTimeout(()=>{var e;return null===(e=I.current)||void 0===e?void 0:e.focus()},500);return}t()}else T({message:"The code must be 4 digits long.",code:"invalid_length"});break;default:console.error("Invalid modal step")}},[t,r,m,p,x,_,M,c]);(0,a.useEffect)(()=>{4===_.length&&(3===S.current.length||0===S.current.length)&&$(),S.current=_},[_,$]);let K=(0,a.useCallback)(()=>{E(e=>0===e?e:e-1)},[]),P=(0,a.useCallback)((e,t,r)=>{T({message:"",code:""}),w(e),g(t),y(r.iso2)},[]),D=(0,a.useMemo)(()=>{switch(M){case 0:return(0,n.jsx)(b,{authDispatch:d,error:N,isChromeStyle:u,onPhoneChange:P,phoneNumber:m});case 1:return(0,n.jsx)(v.W,{authDispatch:d,back:()=>{T({message:"",code:""}),j(""),k(!1),K()},code:_,error:N,isChromeStyle:u,phoneNumber:m,ref:I,setCode:j,setError:T,validating:C});default:return E(0),null}},[d,_,N,u,P,m,K,M,C]);return(0,n.jsx)(l.K,{align:"center",children:(0,n.jsxs)(l.K,{gap:6,justify:"center",style:{maxWidth:u?356:400},children:[u?null:(0,n.jsx)(s.x,{align:"center",as:"h3",size:24,style:{margin:0},weight:600,children:"Verification"}),(0,n.jsx)("form",{onSubmit:e=>{e.preventDefault(),$()},children:D})]})})}function b(e){let{authDispatch:t,phoneNumber:r,onPhoneChange:i,error:o,isChromeStyle:a}=e;return(0,n.jsxs)(l.K,{gap:5,children:[(0,n.jsx)(s.x,{align:"center",as:"p",color:"gray-900",size:16,style:{margin:0},children:a?"To continue signing up, please enter a phone number for verification with a one time code.":"Please enter your phone number to verify your login. You will receive a single use code to submit."}),(0,n.jsx)(d.Z,{format:!0,nationalMode:!1,onPhoneNumberChange:i,onSelectFlag:(e,t,r)=>{i(r,e,t)},telInputProps:{"data-error":o.message.length>0?"":void 0},useMobileFullscreenDropdown:!0,value:r}),o.message?(0,n.jsx)(c.Z,{"data-testid":(0,m.C)("login","error-message"),children:o.message}):null,a?void 0:(0,n.jsx)(s.x,{align:"center",as:"p",color:"gray-900",size:14,style:{margin:0},children:"We won’t ever message you — other than for verification purposes."}),t?(0,n.jsx)(g.T,{authDispatch:t,error:o}):null,t&&o.canSelfVerify?null:(0,n.jsx)(u.z,{type:"default",width:"100%",children:"Continue"})]})}},995581:function(e,t,r){"use strict";r.d(t,{M:function(){return v}});var n=r(397458),i=r(14517),o=r(652983),a=r(132950),l=r(121446),s=new Map([["aol.com",{name:"AOL Mail",url:"https://mail.aol.com"}],["gmail.com",{name:"Gmail",url:"https://mail.google.com"}],["google.com",{name:"Gmail",url:"https://mail.google.com"}],["yahoo.com",{name:"Yahoo Mail",url:"https://mail.yahoo.com"}],["ymail.com",{name:"Yahoo Mail",url:"https://mail.yahoo.com"}],["hotmail.com",{name:"Live mail",url:"https://mail.live.com"}],["live.com",{name:"Live mail",url:"https://mail.live.com"}],["outlook.com",{name:"Live mail",url:"https://mail.live.com"}],["inbox.com",{name:"Inbox.com Email",url:"https://www.inbox.com"}],["mail.com",{name:"mail.com",url:"https://mail.com"}],["gmx.com",{name:"GMX Mail",url:"https://gmx.com"}],["icloud.com",{name:"iCloud Mail",url:"https://www.icloud.com/#mail"}],["me.com",{name:"iCloud Mail",url:"https://www.icloud.com/#mail"}]]),u=r(950429),c=r(791688),d=r(583843),m=r.n(d),f=r(607663),h=r.n(f);function g(e){let{children:t}=e;return(0,n.jsx)("div",{className:h()["security-code"],children:t})}function v(e){let{cancelLogin:t,email:r="",securityCode:d="",size:f,showHeader:h=!0}=e,v=r.split("@")[1],p=v?s.get(v.toLowerCase()):null,b=(0,o.useMemo)(()=>r.replace(/(?<spot>[@._-])/g,`\u200b$<spot>`),[r]);return(0,o.useEffect)(()=>{let e=e=>{let t="Are you sure you want to leave?";return e.preventDefault(),e.returnValue=t,t};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[]),(0,n.jsxs)(a.K,{className:(0,i.W)(m().success),"data-testid":(0,c.C)("login","email-verification"),gap:6,children:[!!h&&(0,n.jsx)(l.x,{align:"center",as:"small"===f?"h3":"h1",size:24,children:"Email Verification"}),(0,n.jsxs)(l.x,{align:"center",color:"gray-900",size:"small"===f?14:16,children:["Keep this window open and in a new tab open the link we just sent to"," ",(0,n.jsxs)("span",{children:[(0,n.jsx)("strong",{className:m().strong,children:p?(0,n.jsx)(u.r,{href:p.url,type:"highlight",children:b}):b})," ","(",(0,n.jsx)(u.r,{href:"",onClick:t,type:"primary",children:"undo"}),")"]})," ","with security\xa0code:"]}),(0,n.jsx)(g,{children:d})]})}},59769:function(e,t,r){"use strict";r.d(t,{C:function(){return _}});var n=r(397458),i=r(316944),o=r(132950),a=r(628987),l=r(652983),s=r(605941),u=r(793356),c=r(585088),d=r(959351),m=r(58363),f=r(68751),h=r(556524),g=r(648601),v=r(901291),p=r(708274),b=r(791688),y=r(361917),x=r.n(y);let w=e=>(0,s.K)(e)&&"message"in e;function _(e){let{authDispatch:t}=e,[r,s]=(0,l.useState)(!1),[y,_]=(0,l.useState)(""),[j,C]=(0,l.useState)(!1),k=(0,a.useSearchParams)(),S=null==k?void 0:k.get("name"),I=null==k?void 0:k.get("email"),{formRef:M,onKeyDown:E}=(0,p.F)(),N=async e=>{e.preventDefault(),s(!0);let t=e.currentTarget,r=new FormData(t),n=r.get("name"),i=r.get("email"),o=r.get("message");h.co.track(h.s6.SELF_VERIFICATION_SUBMIT,{});try{let e=await (0,m.I)("/api/registration/verification-queue",{method:"POST",body:{name:n||S,email:i||I,message:o}});e.error?_(e.error.message||"An unknown error occurred."):C(!0)}catch(e){_(w(e)?e.message:"An unknown error occurred.")}finally{s(!1)}};return(0,n.jsx)(o.K,{as:"form",className:x().selfVerificationContainer,"data-testid":(0,b.C)("self-verification","form"),gap:2,onSubmit:(0,f._)(N),ref:M,children:j?(0,n.jsx)(v.Z,{"data-testid":(0,b.C)("self-verification","success-note"),label:!1,children:"Thank you for submitting your information. We will review it and get back to you shortly."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.I,{"data-testid":(0,b.C)("self-verification","name-input"),id:"name",label:S?void 0:"Your Name",name:"name",required:!0,typeName:S?"hidden":"text",value:S||void 0}),(0,n.jsx)(c.I,{"data-testid":(0,b.C)("self-verification","email-input"),id:"email",label:I?void 0:"Email Address",name:"email",required:!0,typeName:I?"hidden":"email",value:I||void 0}),(0,n.jsx)(d.g,{bypassLabelCasing:!0,"data-testid":(0,b.C)("self-verification","text-area"),id:"message",label:"What will you use Vercel for?",name:"message",onKeyDown:E,required:!0,style:{height:275}}),y?(0,n.jsx)(u.Z,{children:y}):null,(0,n.jsxs)(o.K,{direction:{sm:"column-reverse",md:"row"},gap:2,justify:"space-between",children:[(0,n.jsx)(i.z,{"data-testid":(0,b.C)("self-verification","cancel-button"),disabled:r,onClick:()=>{t({loginState:g.P.ACCOUNT_NEEDS_VERIFY_SMS})},style:{flex:"auto"},type:"secondary",children:"Cancel"}),(0,n.jsx)(i.z,{"data-testid":(0,b.C)("self-verification","submit-button"),disabled:r,style:{flex:"auto"},typeName:"submit",children:"Submit"})]})]})})}},708274:function(e,t,r){"use strict";r.d(t,{F:function(){return o}});var n=r(652983),i=r(321509);function o(e){let t=(0,n.useRef)(null);return{formRef:t,onKeyDown:r=>{if((0,i.x)(r)&&"Enter"===r.key){var n;(null==e?void 0:e.current)?e.current.click():null===(n=t.current)||void 0===n||n.requestSubmit()}}}}},543498:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(397458),i=r(652983),o=r(71299),a=r(556524);function l(e){let t=t=>{let{data:r,isLoading:l,isValidating:s}=(0,o.a)(),u=r?r.user:null;return(0,i.useEffect)(()=>{!u||l||s||a.co.identify(u.uid,u.email)},[l,s,u]),(0,n.jsx)(e,{...t,user:u||t.user})};return e.getInitialProps&&(t.getInitialProps=e.getInitialProps.bind(e)),t}},47518:function(e,t,r){"use strict";r.d(t,{o:function(){return s}});var n=r(397458),i=r(14517);r(652983);var o=r(316944),a=r(406784),l=r.n(a);let s=e=>{let{normal:t,active:r,hover:a,className:s,...u}=e;return(0,n.jsx)(o.z,{...u,className:(0,i.W)(l().button,s),"data-custom-button":"",style:{"--button-custom-fg":`${(null==t?void 0:t.foreground)||""}`,"--button-custom-bg":`${(null==t?void 0:t.background)||""}`,"--button-custom-border":`${(null==t?void 0:t.border)||""}`,"--button-custom-fg-active":`${(null==r?void 0:r.foreground)||""}`,"--button-custom-bg-active":`${(null==r?void 0:r.background)||""}`,"--button-custom-border-active":`${(null==r?void 0:r.border)||""}`,"--button-custom-fg-hover":`${(null==a?void 0:a.foreground)||""}`,"--button-custom-bg-hover":`${(null==a?void 0:a.background)||""}`,"--button-custom-border-hover":`${(null==a?void 0:a.border)||""}`},children:u.children})}},545674:function(e,t,r){"use strict";r.d(t,{X:function(){return i}});var n=r(361961);let i=(0,n.H)('<path d="M6 3v12"/><circle cx="18" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><path d="M18 9a9 9 0 01-9 9"/>')},636319:function(e,t,r){"use strict";r.d(t,{M:function(){return i}});var n=r(361961);let i=(0,n.H)('<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><path d="M22 6l-10 7L2 6"/>')},583843:function(e){e.exports={success:"email-verification_success__a0ycb",strong:"email-verification_strong__wRs25"}},607663:function(e){e.exports={"security-code":"security-code_security-code___okH1"}},361917:function(e){e.exports={selfVerificationContainer:"self-verification_selfVerificationContainer__KDSZt"}},406784:function(e){e.exports={button:"custom_button__pUskI"}}}]);